<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LRU Cache Visualizer</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/lucide/0.263.1/umd/lucide.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, #1e293b 0%, #581c87 50%, #1e293b 100%);
            min-height: 100vh;
            padding: 2rem;
            color: #fff;
            font-size: 18px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            margin-bottom: 3rem;
        }

        .header-title {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .header-title h1 {
            font-size: 3.5rem;
            background: linear-gradient(to right, #c084fc, #f9a8d4);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-weight: 700;
        }

        .header-subtitle {
            color: #d1d5db;
            font-size: 1.375rem;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .stat-card {
            padding: 1.5rem;
            border-radius: 1rem;
            backdrop-filter: blur(10px);
            border: 1px solid;
        }

        .stat-card.blue {
            background: linear-gradient(135deg, rgba(59, 130, 246, 0.2), rgba(37, 99, 235, 0.2));
            border-color: rgba(59, 130, 246, 0.3);
        }

        .stat-card.green {
            background: linear-gradient(135deg, rgba(34, 197, 94, 0.2), rgba(22, 163, 74, 0.2));
            border-color: rgba(34, 197, 94, 0.3);
        }

        .stat-card.red {
            background: linear-gradient(135deg, rgba(239, 68, 68, 0.2), rgba(220, 38, 38, 0.2));
            border-color: rgba(239, 68, 68, 0.3);
        }

        .stat-card.purple {
            background: linear-gradient(135deg, rgba(168, 85, 247, 0.2), rgba(147, 51, 234, 0.2));
            border-color: rgba(168, 85, 247, 0.3);
        }

        .stat-header {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            margin-bottom: 0.5rem;
            font-size: 1.125rem;
            font-weight: 600;
        }

        .stat-value {
            font-size: 2.5rem;
            font-weight: bold;
        }

        .main-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(500px, 1fr));
            gap: 2rem;
            margin-bottom: 2rem;
        }

        .panel {
            background: rgba(30, 41, 59, 0.5);
            backdrop-filter: blur(10px);
            border: 1px solid #475569;
            border-radius: 1.5rem;
            padding: 1.5rem;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
        }

        .panel-header {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 1.75rem;
            font-weight: bold;
            margin-bottom: 1.5rem;
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-label {
            display: block;
            color: #d1d5db;
            font-weight: 600;
            margin-bottom: 0.5rem;
            font-size: 1.125rem;
        }

        .input {
            width: 100%;
            background: #334155;
            border: 1px solid #475569;
            border-radius: 0.5rem;
            padding: 0.875rem 1.125rem;
            color: #fff;
            font-size: 1.125rem;
            outline: none;
            transition: all 0.3s;
        }

        .input:focus {
            border-color: #a855f7;
            box-shadow: 0 0 0 3px rgba(168, 85, 247, 0.3);
        }

        .input::placeholder {
            color: #6b7280;
        }

        .input-row {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 0.5rem;
        }

        .btn {
            width: 100%;
            padding: 0.875rem 1.5rem;
            border: none;
            border-radius: 0.5rem;
            font-weight: 600;
            font-size: 1.125rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            transition: all 0.3s;
        }

        .btn:hover {
            transform: scale(1.05);
        }

        .btn-primary {
            background: linear-gradient(to right, #9333ea, #ec4899);
        }

        .btn-primary:hover {
            background: linear-gradient(to right, #7e22ce, #db2777);
        }

        .btn-secondary {
            background: linear-gradient(to right, #2563eb, #06b6d4);
        }

        .btn-secondary:hover {
            background: linear-gradient(to right, #1d4ed8, #0891b2);
        }

        .btn-danger {
            background: linear-gradient(to right, #dc2626, #ea580c);
        }

        .btn-danger:hover {
            background: linear-gradient(to right, #b91c1c, #c2410c);
        }

        .search-result {
            margin-top: 0.75rem;
            padding: 1rem;
            border-radius: 0.5rem;
            font-weight: 600;
            font-size: 1.125rem;
        }

        .search-result.success {
            background: rgba(34, 197, 94, 0.2);
            border: 1px solid rgba(34, 197, 94, 0.5);
            color: #86efac;
        }

        .search-result.error {
            background: rgba(239, 68, 68, 0.2);
            border: 1px solid rgba(239, 68, 68, 0.5);
            color: #fca5a5;
        }

        .empty-state {
            text-align: center;
            padding: 3rem 0;
        }

        .empty-state-icon {
            margin: 0 auto 1rem;
            opacity: 0.5;
        }

        .empty-state-title {
            color: #9ca3af;
            font-size: 1.375rem;
            margin-bottom: 0.5rem;
            font-weight: 500;
        }

        .empty-state-text {
            color: #6b7280;
            font-size: 1.125rem;
        }

        .cache-items {
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
        }

        .cache-item {
            background: linear-gradient(to right, #334155, #475569);
            border: 1px solid #64748b;
            border-radius: 1rem;
            padding: 1rem;
            transition: all 0.3s;
        }

        .cache-item:hover {
            transform: scale(1.02);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }

        .cache-item.highlight {
            animation: pulse 0.5s;
            border-color: #10b981;
            box-shadow: 0 0 20px rgba(16, 185, 129, 0.5);
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }

        .cache-item-top {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 0.5rem;
            font-size: 1rem;
        }

        .badge {
            font-size: 0.875rem;
            font-weight: bold;
            padding: 0.375rem 0.75rem;
            border-radius: 0.25rem;
        }

        .badge-purple {
            background: rgba(168, 85, 247, 0.3);
            color: #d8b4fe;
        }

        .cache-item-content {
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .cache-key {
            font-weight: bold;
            font-size: 1.375rem;
        }

        .cache-value {
            color: #d8b4fe;
            font-weight: 600;
            font-size: 1.25rem;
        }

        .cache-item-tags {
            display: flex;
            gap: 0.5rem;
            margin-left: auto;
        }

        .tag {
            font-size: 0.875rem;
            padding: 0.375rem 0.75rem;
            border-radius: 0.25rem;
            font-weight: 600;
        }

        .tag-green {
            background: rgba(34, 197, 94, 0.2);
            color: #86efac;
        }

        .tag-red {
            background: rgba(239, 68, 68, 0.2);
            color: #fca5a5;
        }

        .info-section {
            background: rgba(30, 41, 59, 0.5);
            backdrop-filter: blur(10px);
            border: 1px solid #475569;
            border-radius: 1.5rem;
            padding: 1.5rem;
        }

        .info-title {
            font-size: 1.5rem;
            font-weight: bold;
            margin-bottom: 1rem;
        }

        .info-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1rem;
        }

        .info-card {
            background: rgba(51, 65, 85, 0.5);
            border-radius: 0.5rem;
            padding: 1rem;
        }

        .info-card-title {
            color: #c084fc;
            font-weight: bold;
            margin-bottom: 0.5rem;
            font-size: 1.125rem;
        }

        .info-card-text {
            color: #d1d5db;
            font-size: 1rem;
            line-height: 1.6;
        }

        .slots-info {
            text-align: center;
            color: #9ca3af;
            font-size: 1.125rem;
            margin-top: 1rem;
        }

        @media (max-width: 768px) {
            .main-grid {
                grid-template-columns: 1fr;
            }

            .header-title h1 {
                font-size: 2rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <div class="header-title">
                <i data-lucide="database" style="width: 48px; height: 48px; color: #c084fc;"></i>
                <h1>LRU Cache Visualizer</h1>
            </div>
            <p class="header-subtitle">Least Recently Used Cache Algorithm </p>
        </div>

        <!-- Stats Dashboard -->
        <div class="stats-grid">
            <div class="stat-card blue">
                <div class="stat-header">
                    <i data-lucide="trending-up" style="color: #60a5fa;"></i>
                    <h3 style="color: #93c5fd;">Hit Rate</h3>
                </div>
                <p class="stat-value" id="hitRate">0%</p>
            </div>
            
            <div class="stat-card green">
                <div class="stat-header">
                    <i data-lucide="search" style="color: #4ade80;"></i>
                    <h3 style="color: #86efac;">Cache Hits</h3>
                </div>
                <p class="stat-value" id="hits">0</p>
            </div>
            
            <div class="stat-card red">
                <div class="stat-header">
                    <i data-lucide="clock" style="color: #f87171;"></i>
                    <h3 style="color: #fca5a5;">Cache Misses</h3>
                </div>
                <p class="stat-value" id="misses">0</p>
            </div>
            
            <div class="stat-card purple">
                <div class="stat-header">
                    <i data-lucide="database" style="color: #a78bfa;"></i>
                    <h3 style="color: #c4b5fd;">Capacity</h3>
                </div>
                <p class="stat-value" id="capacity">0/4</p>
            </div>
        </div>

        <!-- Main Grid -->
        <div class="main-grid">
            <!-- Control Panel -->
            <div class="panel">
                <div class="panel-header">
                    <i data-lucide="plus" style="color: #c084fc;"></i>
                    Control Panel
                </div>
                
                <div class="form-group">
                    <label class="form-label">Cache Capacity</label>
                    <input type="number" id="capacityInput" class="input" value="4" min="1" max="10">
                </div>

                <div class="form-group">
                    <label class="form-label">Add to Cache</label>
                    <div class="input-row">
                        <input type="text" id="keyInput" class="input" placeholder="Key">
                        <input type="text" id="valueInput" class="input" placeholder="Value">
                    </div>
                    <button class="btn btn-primary" onclick="addToCache()">
                        <i data-lucide="plus" style="width: 20px; height: 20px;"></i>
                        Add to Cache
                    </button>
                </div>

                <div class="form-group">
                    <label class="form-label">Search Cache</label>
                    <div class="input-row">
                        <input type="text" id="searchInput" class="input" placeholder="Search key...">
                        <button class="btn btn-secondary" onclick="searchCache()" style="width: auto; padding: 0.75rem 1.5rem;">
                            <i data-lucide="search" style="width: 20px; height: 20px;"></i>
                            Search
                        </button>
                    </div>
                    <div id="searchResult"></div>
                </div>

                <button class="btn btn-danger" onclick="clearCache()">
                    <i data-lucide="trash-2" style="width: 20px; height: 20px;"></i>
                    Clear Cache
                </button>
            </div>

            <!-- Cache Visualization -->
            <div class="panel">
                <div class="panel-header">
                    <i data-lucide="database" style="color: #c084fc;"></i>
                    Cache Contents
                </div>
                
                <div id="cacheDisplay">
                    <div class="empty-state">
                        <i data-lucide="database" class="empty-state-icon" style="width: 64px; height: 64px; color: #4b5563;"></i>
                        <p class="empty-state-title">Cache is empty</p>
                        <p class="empty-state-text">Add items to see them here</p>
                    </div>
                </div>
                
                <div id="slotsInfo" class="slots-info" style="display: none;"></div>
            </div>
        </div>

        <!-- How it Works -->
        <div class="info-section">
            <h3 class="info-title">How LRU Cache Works</h3>
            <div class="info-grid">
                <div class="info-card">
                    <div class="info-card-title">1. Access Pattern</div>
                    <p class="info-card-text">Items move to the front when accessed or added.</p>
                </div>
                <div class="info-card">
                    <div class="info-card-title">2. Eviction Policy</div>
                    <p class="info-card-text">When capacity is reached, the least recently used item is removed.</p>
                </div>
                <div class="info-card">
                    <div class="info-card-title">3. Optimization</div>
                    <p class="info-card-text">Keeps frequently accessed data readily available for fast retrieval.</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        let cache = [];
        let capacity = 4;
        let stats = { hits: 0, misses: 0, operations: 0 };

        function updateStats() {
            document.getElementById('hits').textContent = stats.hits;
            document.getElementById('misses').textContent = stats.misses;
            document.getElementById('capacity').textContent = `${cache.length}/${capacity}`;
            
            const hitRate = stats.operations > 0 
                ? ((stats.hits / stats.operations) * 100).toFixed(1)
                : 0;
            document.getElementById('hitRate').textContent = `${hitRate}%`;
        }

        function renderCache() {
            const display = document.getElementById('cacheDisplay');
            const slotsInfo = document.getElementById('slotsInfo');
            
            if (cache.length === 0) {
                display.innerHTML = `
                    <div class="empty-state">
                        <i data-lucide="database" class="empty-state-icon" style="width: 64px; height: 64px; color: #4b5563;"></i>
                        <p class="empty-state-title">Cache is empty</p>
                        <p class="empty-state-text">Add items to see them here</p>
                    </div>
                `;
                slotsInfo.style.display = 'none';
            } else {
                display.innerHTML = '<div class="cache-items">' + cache.map((item, index) => {
                    const position = index === 0 ? 'MRU' : index === cache.length - 1 ? 'LRU' : `#${index + 1}`;
                    const showRecent = index === 0;
                    const showEvict = index === cache.length - 1 && cache.length === capacity;
                    
                    return `
                        <div class="cache-item" data-key="${item.key}">
                            <div style="display: flex; align-items: center; justify-content: space-between;">
                                <div style="flex: 1;">
                                    <div class="cache-item-top">
                                        <span class="badge badge-purple">${position}</span>
                                        <span style="color: #9ca3af; font-size: 1rem;">Position ${index + 1}</span>
                                    </div>
                                    <div class="cache-item-content">
                                        <span class="cache-key">${item.key}</span>
                                        <span style="color: #9ca3af;">→</span>
                                        <span class="cache-value">${item.value}</span>
                                    </div>
                                </div>
                                <div class="cache-item-tags">
                                    ${showRecent ? '<span class="tag tag-green">Most Recent</span>' : ''}
                                    ${showEvict ? '<span class="tag tag-red">Will Evict Next</span>' : ''}
                                </div>
                            </div>
                        </div>
                    `;
                }).join('') + '</div>';
                
                if (cache.length < capacity) {
                    const remaining = capacity - cache.length;
                    slotsInfo.textContent = `${remaining} slot${remaining !== 1 ? 's' : ''} available`;
                    slotsInfo.style.display = 'block';
                } else {
                    slotsInfo.style.display = 'none';
                }
            }
            
            lucide.createIcons();
        }

        function addToCache() {
            const keyInput = document.getElementById('keyInput');
            const valueInput = document.getElementById('valueInput');
            const key = keyInput.value.trim();
            const value = valueInput.value.trim();
            
            if (!key || !value) return;
            
            const existingIndex = cache.findIndex(item => item.key === key);
            
            if (existingIndex !== -1) {
                cache.splice(existingIndex, 1);
            } else if (cache.length >= capacity) {
                cache.pop();
            }
            
            cache.unshift({ key, value, timestamp: Date.now() });
            stats.operations++;
            
            keyInput.value = '';
            valueInput.value = '';
            
            updateStats();
            renderCache();
        }

        function searchCache() {
            const searchInput = document.getElementById('searchInput');
            const searchKey = searchInput.value.trim();
            const resultDiv = document.getElementById('searchResult');
            
            if (!searchKey) return;
            
            const index = cache.findIndex(item => item.key === searchKey);
            
            if (index !== -1) {
                const item = cache[index];
                cache.splice(index, 1);
                cache.unshift(item);
                
                stats.hits++;
                stats.operations++;
                
                resultDiv.className = 'search-result success';
                resultDiv.textContent = `✓ Found: ${item.value}`;
                
                setTimeout(() => {
                    const element = document.querySelector(`.cache-item[data-key="${searchKey}"]`);
                    if (element) {
                        element.classList.add('highlight');
                        setTimeout(() => element.classList.remove('highlight'), 500);
                    }
                }, 100);
            } else {
                stats.misses++;
                stats.operations++;
                
                resultDiv.className = 'search-result error';
                resultDiv.textContent = '✗ Key not found in cache';
            }
            
            setTimeout(() => {
                resultDiv.className = '';
                resultDiv.textContent = '';
            }, 3000);
            
            updateStats();
            renderCache();
        }

        function clearCache() {
            cache = [];
            stats = { hits: 0, misses: 0, operations: 0 };
            updateStats();
            renderCache();
        }

        document.getElementById('capacityInput').addEventListener('input', (e) => {
            capacity = Math.max(1, parseInt(e.target.value) || 1);
            updateStats();
        });

        document.getElementById('keyInput').addEventListener('keydown', (e) => {
            if (e.key === 'Enter') addToCache();
        });

        document.getElementById('valueInput').addEventListener('keydown', (e) => {
            if (e.key === 'Enter') addToCache();
        });

        document.getElementById('searchInput').addEventListener('keydown', (e) => {
            if (e.key === 'Enter') searchCache();
        });

        // Initialize
        updateStats();
        renderCache();
        lucide.createIcons();
    </script>
</body>
</html>
